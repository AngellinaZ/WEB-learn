参考： [Neal_yang](https://juejin.im/post/59c91b106fb9a00a4b0c5f0e), [mqyqingfeng](https://github.com/mqyqingfeng/Blog/issues)
 
## 执行上下文
 * 当 JavaScript 代码执行一段可执行代码(executable code)时，会创建对应的执行上下文(execution context)。
 * 执行上下文有三个重要的属性
   - 变量对象(Variable object，VO)
   - 作用域链(Scope chain)
   - this

****
### 变量对象(variable)
 


**** 
### 执行上下文栈 (Execution context stack，ECS)
 * javascript代码执行顺序： 顺序执行
```javascript 
//变量提升
var foo = function () {

    console.log('foo1');

}

foo();  // foo1

var foo = function () {

    console.log('foo2');

}

foo(); // foo2
```
```javascript 
//函数提升
function foo() {

    console.log('foo1');

}

foo();  // foo2

function foo() {

    console.log('foo2');

}

foo(); // foo2
```
 * 可执行代码 ： 全局代码， 函数代码， eval代码
 * 当执行一个函数的时候，就会创建一个`执行上下文`，并且压入`执行上下文栈`，当函数执行完毕的时候，就会将函数的执行上下文从栈中弹出。


****
### 执行环境及其作用域

 * `执行环境`定义了变量或函数有权访问其他数据, 每个执行环境都有一个与之相关的`变量对象`，环境中定义的所有变量和函数都保存在这个对象中。
 * 当代码在一个环境中执行的时候，会创建变量对象的一个`作用域链`
   * 作用域链的用途，是保证对执行环境有权访问的变量和函数的有序访问。
   * 作用域链的前端，始终是当前执行的代码所在的环境的变量对象。全局执行环境始终是作用域链的最后一个对象。
   * 内部环境可以通过作用域链访问外部环境的变量
```javascript
var color = 'red';
function changeColor() {
  var anotherColor = 'blue';
  function swapColors() {
    var tempColor = anotherColor;
    anotherColor = color;
    color = tempColor;
    //这个执行环境中可以访问到 tempColor color antherColor
  }
  //这里只能访问anotherColor color
  swapColors();
}
changeColor();//这里只能访问colo
```
![action-scope](https://github.com/AngellinaZ/WEB-learn/blob/master/images/actionScope.png)


****
#### 延长作用域链

 * try-catch 语句中的catch
 * width语句
 
****
#### 垃圾收集

 * 标记清除
 * 主动清除垃圾： xxx = null
