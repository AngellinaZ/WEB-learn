# node.js

## node.js 的特点

* 单进程单线程，通过事件和回调支持并发
* 每个api都是异步的，并作为一个独立线程运行，使用异步函数调用，并处理并发
* 基本上所有的事件机制都是用设计模式中 观察者模式 实现。
* 单线程类似进入一个while(true)的事件循环，直到没有事件观察者退出，每个异步事件都生成一个事件观察者，如果有事件发生就调用该回调函数.
  
  
### 基本过程：

(1).用require载入http模块
(2).创建服务器： 调用 http 模块提供的函数：createServer。函数返回一个对象，对象有一个listen方法，传入数值参数，指定这个 HTTP 服务器监听的端口号。


### REPL(Read Eval Print Loop)--交互式解释器

* 可以在终端输入命令，并接收系统的响应 --- 交代各种终端使用快捷键


### 回调函数

* 异步编程依托回调来实现，但不能说使用了回调后程序就异步化了。执行代码时就没有阻塞或等待文件 I/O 操作


### 事件循环 -- 事件驱动模型(类似观察者模式)

* 当web server接到请求，关闭请求然后进行处理，然后去服务下一个请求，当请求完成后，将它放到处理队列，当到达队列开头，把结果返回给用户
* 在事件驱动模型中，会生成一个主循环来监听事件，当检测到事件时触发回调函数。
   

### Node 应用程序是如何工作的？

* 执行异步操作的函数，将回调函数作为最后一个参数，回调函数接收错误对象作为第一个参数
  ```
  var fs = require("fs");
  fs.readFile('input.txt', function (err, data) {
     if (err){
        console.log(err.stack);
        return;
     }
     console.log(data.toString());
  });
  ```
