<html>
  <head>
  <meta charset="utf-8">
  <title>递归</title>
  <script language="javascript">
      function Window_Load(){
          //自定义属性depth为2的所有html控件对象
        var elements = getElementsByAttribute("depth","2");
        alert(elements[0].outerHTML);
      }
      
      var walk_the_DOM = function walk(node, func) {
        //debugger;
        func(node);
        node = node.firstChild;
        console.log(node)
        while (node) {
//循环中有循环 -- 当执行的walk()中的node = null时，不进入while循环，但第一次进入循环时还残留这一个node = node.nextSibling
            walk(node, func);  
            node = node.nextSibling;  
        }
      };
       
      var getElementsByAttribute = function (att, value) {
        var results = [];
   
        walk_the_DOM(document.body, function (node) {
          var actual = node.nodeType === 1 && node.getAttribute(att);
          if (typeof actual === 'string' && 
              (actual === value || typeof value !== 'string')) {
            results.push(node)
          }
        });
        return results;
      };
    </script>
  </head>
  <body onload="Window_Load();">
    <div id="nodea"> 
        <div id="node1" depth="2" width="30"> dd </div>
        
    </div>
    <div id="nodeb"> 
        <div id="node2" depth="2" width="30"> dd </div>
        
    </div>
  </body>
</html>
