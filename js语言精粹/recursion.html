<html>
  <head>
  <meta charset="utf-8">
    <script language="javascript">
      function Window_Load(){
           
          //自定义属性depth为2的所有html控件对象
        var elements = getElementsByAttribute("depth","2");
        alert(elements[0].outerHTML);
        //取得所有width为29的html控件对象
        //var elements = getElementsByAttribute("width","29");  
      }
      var walk_the_DOM = function walk(node, func) {
        //debugger;
        func(node);
        node = node.firstChild;
        console.log(node)
        while (node) {
            console.log(node)
          walk(node, func);
          node = node.nextSibling;
          //console.log(node)
        }
      };
       
      var getElementsByAttribute = function (att, value) {
        var results = [];
   
        walk_the_DOM(document.body, function (node) {
          var actual = node.nodeType === 1 && node.getAttribute(att);
          if (typeof actual === 'string' && 
              (actual === value || typeof value !== 'string')) {
            results.push(node)
          }
        });
        return results;
      };
    </script>
  </head>
  <body onload="Window_Load();">
    <div id="nodea"> 
        <div id="node1" depth="2" width="30"> dd </div>
        
    </div>
    <div id="nodeb"> 
        <div id="node2" depth="2" width="30"> dd </div>
        
    </div>
  </body>
</html>